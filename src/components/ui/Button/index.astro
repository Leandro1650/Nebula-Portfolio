---
import { Icon } from "astro-icon/components";
import type { Props } from "./types";

const {
  variant = "primary",
  target,
  text = Astro.slots.render("default"),
  icon = "",
  class: className = "",
  type,
  ...rest
} = Astro.props as Props;

const variants = {
  primary: "btn-primary",
  secondary: "btn-secondary",
  ghost: "btn btn-ghost",
  link: "cursor-pointer hover:text-primary",
};
---

{
  type === "button" || type === "submit" || type === "reset" ? (
    <button
      type={type}
      class={`${variants[variant] || ""} ${className}`}
      {...rest}
    >
      {icon &&
        typeof icon === "object" &&
        icon.position === "left" &&
        icon.name && (
          <Icon
            name={icon.name}
            class="w-5 h-5 mr-1 -ml-1.5 rtl:ml-1 rtl:-mr-1.5 inline-block"
          />
        )}
      <Fragment set:html={text} />

      {icon && typeof icon === "string" ? (
        <Icon
          name={icon}
          class="w-5 h-5 ml-1 -mr-1.5 rtl:mr-1 rtl:-ml-1.5 inline-block"
        />
      ) : typeof icon === "object" &&
        (!icon.position || icon.position === "right") ? (
        <Icon
          name={icon.name}
          class="w-5 h-5 ml-1 -mr-1.5 rtl:mr-1 rtl:-ml-1.5 inline-block"
        />
      ) : null}
    </button>
  ) : (
    <a
      class={`${variants[variant] || ""} ${className}`}
      {...(target ? { target: target, rel: "noopener noreferrer" } : {})}
      {...rest}
    >
      {icon &&
        typeof icon === "object" &&
        icon.position === "left" &&
        icon.name && (
          <Icon
            name={icon.name}
            class="w-5 h-5 mr-1 -ml-1.5 rtl:ml-1 rtl:-mr-1.5 inline-block"
          />
        )}
      <Fragment set:html={text} />
      {icon && typeof icon === "string" ? (
        <Icon
          name={icon}
          class="w-5 h-5 ml-1 -mr-1.5 rtl:mr-1 rtl:-ml-1.5 inline-block"
        />
      ) : typeof icon === "object" &&
        (!icon.position || icon.position === "right") ? (
        <Icon
          name={icon.name}
          class="w-5 h-5 ml-1 -mr-1.5 rtl:mr-1 rtl:-ml-1.5 inline-block"
        />
      ) : null}
    </a>
  )
}
